<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Main Page</title>
	<link rel="stylesheet" type="text/css" href="styles/style2.css">
	<link rel="stylesheet" type="text/css" href="styles/buttonStyle.css">
	<link rel="stylesheet" type="text/css" href="styles/formStyle.css">
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
	<script src="js/saveNote.js"></script>
	<script src="js/script.js"></script>
    <script src="js/tasksList.js"></script>    

</head>

<body>
	<nav>

		<div class="topnav">
			<a class="active" href="#home"><img src="https://raw.githubusercontent.com/Anastat/ApplicationDevelopmentProject/master/html/Icons/TF17_vantaa_hotel_logo_400x140_20170120.png" alt="Logo" style="width: 40%; height: 40%; float: left;"></a>
			<a style="float: right;" id="username">Username</a>
          <img src="https://raw.githubusercontent.com/Anastat/ApplicationDevelopmentProject/master/html/Icons/user_icon.png" style="width: 3%; height: 3%; float: right" alt="icon" >
		</div>

	</nav>
	<div class="align-center">

		<form action="submit" class="float-right">
			<input type="radio" name="option" value="all" onclick="findAll()"> <b>All</b>
			<input type="radio" name="option" value="new" onclick="findnewById(username)"> <b>New</b>
			<input type="radio" name="option" value="in_process" onclick="findinprocessById(username)"> <b>In progress</b>
			<input type="radio" name="option" value="done" onclick="finddoneById(username)"> <b>Done</b>
			<input type="radio" name="option" value="cancelled" onclick="findcancelledById(username)"> <b>Cancelled</b>
		</form>

		<div id="tasks-list" class="boxed">
		</div>
		<div class="wrapper">
			<input type="button" value="Add new task" class="button" id="myBtn">
		</div>
	</div>
	<div id="myModal" class="modal">

		<!-- Modal content -->
		<div class="modal-content">
			<span class="close">&times;</span>
			<form class="noteForm" id="form">
				
				<ul class="button-group">
                                    
					<li><button class="button notDisabled" id="newButton" value = "1" type="button" onclick="hideNew()">
                    <img src="../../../html/Icons/Add.png" alt="add"><br>
                    NEW</button></li>
                    <li><button class="button disabled" id="inProcess" value="2" type="button" onclick="hideInProcess()"><img src="../../../html/Icons/inProcess.png" alt="icon"><br>
                    IN PROCESS</button></li>
                    <li><button class="button disabled" id="done" value="3" type="button" onclick="hideDone()"><img src="../../../html/Icons/done.png" alt="done"><br>
                    DONE</button></li>
                    <li><button class="button disabled" id="cancelled" value="4" type="button" onclick="hideCancelled()"><img src="../../../html/Icons/cancelled.png" alt="cancelled"><br>
                    CANCELLED</button></li>
				</ul>
				<label id="dateLabel">Due date</label>
				<input type="date" id="dateInput">
				<label id="timeLabel">Due time</label>
				<input type="time" id="timeInput">
				<label id="departmentLabel">Responsible department</label>
				<select id="departmentSelect">
  					<option value="1">Management</option>
					<option value="2">Front Office</option>
  					<option value="3">Housekeeping</option>
					<option value="4">Guest Service</option>
					<option value="5">Food and Beverage</option>
					<option value="6">Engineering and Maintenance</option>
					<option value="7">Other</option>
				</select>
				<label id="placeLabel">Place</label>
				<select id="placeSelect">
  						<option value="1">Room</option>
						<option value="2">Small restaurant</option>
  						<option value="3">Conference hall</option>
						<option value="4">Main hall</option>
					</select>
				<label id="titleLabel">Title</label>
				<input type="text" id="titleInput">
				<label id="detailsLabel">Details</label>
				<input type="text" id="detailsInput">
				<label id="attachmentLabel">Attachment</label>
				<input type="file" id="fileInput">
				<label id="historyLabel">History:</label>
				<output id="historyOutput"></output>
				<input type="submit" class="templateButtons" id="saveButton" value="SAVE">
				<input type="submit" class="templateButtons" id="cancelButton" value="CANCEL">
			</form>
		</div>

	</div>
	<script>


	//Function for preventing page refresh after submit in form
	var modal = document.getElementById('myModal');
	$('#form').submit(function (e) {
 		e.preventDefault();
 		console.log("test");
 		console.log(modal);
 		modal.style.display = "none";
});

		function hideNew() {
			var a = document.getElementById("newButton");
			var b = document.getElementById("inProcess");
			var c = document.getElementById("cancelled");
			var d = document.getElementById("done");
			console.log(document.getElementById("newButton").value);
			a.className = "button notDisabled";
			b.className = "button disabled";
			c.className = "button disabled";
			d.className = "button disabled";
		}
		function hideInProcess() {
			var a = document.getElementById("newButton");
			var b = document.getElementById("inProcess");
			var c = document.getElementById("cancelled");
			var d = document.getElementById("done");
			console.log(document.getElementById("inProcess").value);
			a.className = "button disabled";
			b.className = "button notDisabled";
			c.className = "button disabled";
			d.className = "button disabled";
		}
		function hideCancelled() {
			var a = document.getElementById("newButton");
			var b = document.getElementById("inProcess");
			var c = document.getElementById("cancelled");
			var d = document.getElementById("done");
			console.log(document.getElementById("cancelled").value);	
			a.className = "button disabled";
			b.className = "button disabled";
			c.className = "button notDisabled";
			d.className = "button disabled";
		}
		function hideDone() {
			var a = document.getElementById("newButton");
			var b = document.getElementById("inProcess");
			var c = document.getElementById("cancelled");
			var d = document.getElementById("done");
			console.log(document.getElementById("done").value);	
			a.className = "button disabled";
			b.className = "button disabled";
			c.className = "button disabled";
			d.className = "button notDisabled";
		}



			//Get username
            console.log(window.location.href);
            var url_string = window.location.href;
			var url = new URL(url_string);
			var username = url.searchParams.get("username");
			console.log(username);
                
    function findcancelledById(id) {
    $.ajax({
        type: 'GET',
        url: "http://localhost:8080/sokoshotel/webresources/tasksrest/sortcancelled/" + id,
        dataType: "json",
        success: function(data){
            console.log("success");
            console.log(data);
        }
    });
}
    function findnewById(id) {
    $.ajax({
        type: 'GET',
        url: "http://localhost:8080/sokoshotel/webresources/tasksrest/sortnew/" + id,
        dataType: "json",
        success: function(data){
            console.log("success");
            console.log(data);
        }
    });
}
    function findinprocessById(id) {
    $.ajax({
        type: 'GET',
        url: "http://localhost:8080/sokoshotel/webresources/tasksrest/sortprocess/" + id,
        dataType: "json",
        success: function(data){
            console.log("success");
            console.log(data);
        }
    });
}
    function finddoneById(id) {
    $.ajax({
        type: 'GET',
        url: "http://localhost:8080/sokoshotel/webresources/tasksrest/sortdone/" + id,
        dataType: "json",
        success: function(data){
            console.log("success");
            console.log(data);
        }
    });
}

    function findAll() {
    $.ajax({
        type: 'GET',
        url: "http://localhost:8080/sokoshotel/webresources/tasksrest/findAll",
        dataType: "json",
        success: function(data){
            console.log("success");
            console.log(data);
        }
    });
}
	</script>
</body>

</html>
